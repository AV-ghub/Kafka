–ö–æ–Ω–µ—á–Ω–æ, –¥–∞–≤–∞–π —Ä–∞–∑–≤–µ—Ä–Ω—ë–º —Å–µ—Ä–≤–µ—Ä Apache Kafka –Ω–∞ AlmaLinux —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–∫–µ—Ç–æ–≤ RPM, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —á–µ—Ä–µ–∑ YUM. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Kafka –≤ —Å–∏—Å—Ç–µ–º—É —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —É—Å–∏–ª–∏—è–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ systemd.

---

## ‚úÖ –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java

Apache Kafka —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π Java. –î–ª—è AlmaLinux 9 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenJDK 21:([hostnextra.com][1])

```bash
sudo dnf install java-21-openjdk-devel -y
```



–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Java —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:

```bash
java -version
```



---

## ‚úÖ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Apache Kafka

–°–∫–∞—á–∞–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ Kafka —Å –ø–æ–º–æ—â—å—é RPM-–ø–∞–∫–µ—Ç–∞:

```bash
sudo rpm -ivh https://github.com/doraeven/kafka-server/releases/download/3.8.0-1.el9.x86_64.rpm
```



–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç Kafka –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

---

## ‚úÖ –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kafka

–°–æ–∑–¥–∞–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:

```bash
sudo mkdir -p /var/lib/kafka
sudo mkdir -p /var/lib/zookeeper
```



–°–∫–æ–ø–∏—Ä—É–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
sudo cp /etc/kafka/server.properties /etc/kafka/server.properties.bak
```



–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
sudo nano /etc/kafka/server.properties
```



–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

```properties
broker.id=0
listeners=PLAINTEXT://:9092
advertised.listeners=PLAINTEXT://your_server_ip:9092
log.dirs=/var/lib/kafka
zookeeper.connect=localhost:2181
```



–ó–∞–º–µ–Ω–∏—Ç–µ `your_server_ip` –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.([idroot.us][2])

---

## ‚úÖ –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd –¥–ª—è Kafka

–°–æ–∑–¥–∞–π unit-—Ñ–∞–π–ª –¥–ª—è Kafka:([orcacore.com][3])

```bash
sudo nano /etc/systemd/system/kafka.service
```



–î–æ–±–∞–≤—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:([orcacore.com][3])

```ini
[Unit]
Description=Apache Kafka Server
After=network.target zookeeper.service

[Service]
Type=simple
Environment="JAVA_HOME=/usr/lib/jvm/java-21-openjdk"
ExecStart=/usr/bin/kafka-server-start.sh /etc/kafka/server.properties
ExecStop=/usr/bin/kafka-server-stop.sh
Restart=on-failure

[Install]
WantedBy=multi-user.target
```



–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ systemd:

```bash
sudo systemctl daemon-reload
```



–í–∫–ª—é—á–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ Kafka:

```bash
sudo systemctl enable --now kafka
```



---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Kafka

–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo systemctl status kafka
```



–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Ç—ã —É–≤–∏–¥–∏—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## ‚úÖ –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zookeeper (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Zookeeper, —É—Å—Ç–∞–Ω–æ–≤–∏ –µ–≥–æ:([hostnextra.com][1])

```bash
sudo dnf install zookeeper-server -y
```



–ó–∞–ø—É—Å—Ç–∏ –∏ –≤–∫–ª—é—á–∏ Zookeeper:

```bash
sudo systemctl enable --now zookeeper
```



–£–±–µ–¥–∏—Å—å, —á—Ç–æ Kafka –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Zookeeper, –ø—Ä–æ–≤–µ—Ä–∏–≤ —Å—Ç—Ä–æ–∫—É `zookeeper.connect` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ Kafka.

---

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—Ä–æ–¥–∞–∫—à–Ω-–æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ–±—Ä–∞—â–∞–π—Å—è ‚Äî —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å!

[1]: https://hostnextra.com/learn/tutorials/installing-apache-kafka-on-almalinux?utm_source=chatgpt.com "Installing Apache Kafka on AlmaLinux 9 - HostnExtra"
[2]: https://idroot.us/install-apache-kafka-almalinux-9/?utm_source=chatgpt.com "How To Install Apache Kafka on AlmaLinux 9 - idroot"
[3]: https://orcacore.com/install-apache-kafka-almalinux-9/?utm_source=chatgpt.com "Install Apache Kafka on AlmaLinux 9 | Full Guide - OrcaCore"

–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤: –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ Apache Kafka 3.3, –±—ã–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –∫–æ–Ω—Å–µ–Ω—Å—É—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª **KRaft** (Kafka Raft), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç Kafka —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç ZooKeeper. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. ([infoq.com][1], [developer.confluent.io][2])

---

## ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: Kafka –±–µ–∑ ZooKeeper

–° –≤–µ—Ä—Å–∏–∏ **Kafka 4.0** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ZooKeeper –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞, –∏ Kafka —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ KRaft-—Ä–µ–∂–∏–º–µ. ([reddit.com][3])

---

## ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ

–ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Kafka –≤–µ—Ä—Å–∏–∏ 3.3 –∏–ª–∏ –≤—ã—à–µ, —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å ZooKeeper. –ü—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π Kafka –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ KRaft-—Ä–µ–∂–∏–º–µ.

### –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞:**

   ```bash
   ./bin/kafka-storage.sh random-uuid
   ```



2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞:**

   ```bash
   ./bin/kafka-storage.sh format -t <uuid> -c ./config/kraft/server.properties
   ```



3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `server.properties`:**

   ```properties
   process.roles=broker,controller
   node.id=1
   listeners=CONTROLLER://controller1.example.com:9093
   controller.quorum.voters=1@controller1.example.com:9093,2@controller2.example.com:9093,3@controller3.example.com:9093
   ```



4. **–ó–∞–ø—É—Å–∫ Kafka —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º KRaft-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

   ```bash
   ./bin/kafka-server-start.sh ./config/kraft/server.properties
   ```



–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ KRaft-—Ä–µ–∂–∏–º–µ Kafka –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –±—Ä–æ–∫–µ—Ä–∞, —Ç–∞–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.([medium.com][4])

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ, —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Å—Ç–∞—Ç—É—Å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
./bin/kafka-topics.sh --bootstrap-server localhost:9092 --describe
```



–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç—ã —É–≤–∏–¥–∏—à—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–ø–∏–∫–∞—Ö –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–µ.

---

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π systemd –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ –∏–ª–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏, –¥–∞–π –∑–Ω–∞—Ç—å ‚Äî —è –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å!

[1]: https://www.infoq.com/news/2022/10/apache-kafka-kraft/?utm_source=chatgpt.com "Apache Kafka 3.3 Replaces ZooKeeper with the New KRaft Consensus Protocol - InfoQ"
[2]: https://developer.confluent.io/learn/kraft/?utm_source=chatgpt.com "KRaft - Apache Kafka Without ZooKeeper"
[3]: https://www.reddit.com/r/apachekafka/comments/1je7h1q?utm_source=chatgpt.com "Apache Kafka 4.0 released üéâ"
[4]: https://medium.com/%40erkndmrl/how-to-run-apache-kafka-without-zookeeper-3376468ddaa8?utm_source=chatgpt.com "How to run Apache Kafka without Zookeeper | by Erkan Demirel | Medium"

–û—Ç–ª–∏—á–Ω–æ! –£ —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ **Apache Kafka 3.9.0**, –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç ‚Äî –º–æ–∂–Ω–æ (–∏ –Ω—É–∂–Ω–æ) –∑–∞–ø—É—Å–∫–∞—Ç—å Kafka **–≤ —Ä–µ–∂–∏–º–µ KRaft (–±–µ–∑ ZooKeeper)**. –≠—Ç–∞ –≤–µ—Ä—Å–∏—è —É–∂–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç KRaft –∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã, –∏ —Ç—ã –∏–¥—ë—à—å –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø—É—Ç–∏ üí°

---

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ (Kafka 3.9, KRaft mode):

–í–æ—Ç –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–¥ —Ç–≤–æ—é —Å–∏—Å—Ç–µ–º—É (AlmaLinux, RPM):

---

### üîπ 1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Cluster UUID

```bash
/opt/kafka/bin/kafka-storage.sh random-uuid
```

–°–æ—Ö—Ä–∞–Ω–∏ UUID, –æ–Ω –±—É–¥–µ—Ç –Ω—É–∂–µ–Ω –¥–∞–ª—å—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `e7c3b893a1f34a8c913c9c4e248d233e`).

---

### üîπ 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è KRaft

–§–∞–π–ª –æ–±—ã—á–Ω–æ: `/etc/kafka/server.properties`
–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –Ω–∞–π–¥–∏ –ø—É—Ç—å:

```bash
rpm -ql kafka-3.9.0 | grep server.properties
```

–û—Ç–∫—Ä–æ–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
sudo nano /etc/kafka/server.properties
```

–ü–æ–º–µ–Ω—è–π –∏–ª–∏ –¥–æ–±–∞–≤—å —Å–ª–µ–¥—É—é—â–µ–µ (–∞–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Å–µ–±—è):

```properties
process.roles=broker,controller
node.id=1
controller.listener.names=CONTROLLER
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
advertised.listeners=PLAINTEXT://your_host_or_ip:9092
log.dirs=/var/lib/kafka
controller.quorum.voters=1@localhost:9093
```

üîπ –ù–µ –∑–∞–±—É–¥—å –∑–∞–º–µ–Ω–∏—Ç—å `your_host_or_ip` –Ω–∞ IP –∏–ª–∏ –∏–º—è —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

---

### üîπ 3. –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

```bash
sudo /opt/kafka/bin/kafka-storage.sh format -t e7c3b893a1f34a8c913c9c4e248d233e -c /etc/kafka/server.properties
```

*(–≥–¥–µ `-t <UUID>` ‚Äî —Ç–æ—Ç, —á—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏–ª –Ω–∞ —à–∞–≥–µ 1)*

---

### üîπ 4. –°–æ–∑–¥–∞—Ç—å systemd unit (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)

```bash
sudo nano /etc/systemd/system/kafka.service
```

–ü—Ä–∏–º–µ—Ä:

```ini
[Unit]
Description=Apache Kafka (KRaft mode)
After=network.target

[Service]
Type=simple
Environment="JAVA_HOME=/usr/lib/jvm/java-21-openjdk"
ExecStart=/opt/kafka/bin/kafka-server-start.sh /etc/kafka/server.properties
ExecStop=/opt/kafka/bin/kafka-server-stop.sh
Restart=on-failure
User=kafka

[Install]
WantedBy=multi-user.target
```

–ó–∞–º–µ–Ω–∏—Ç–µ `/opt/kafka` –Ω–∞ —Å–≤–æ–π –ø—É—Ç—å, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.

---

### üîπ 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å Kafka

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now kafka
```

---

### üîπ 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
sudo systemctl status kafka
journalctl -u kafka -f
```

---

### üîπ 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ Kafka (CLI)

```bash
/opt/kafka/bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚Äî –≤—Å—ë –æ–∫, Kafka –∂–∏–≤—ë—Ç üéâ

---

## üí¨ –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å:

* —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Kafka topics –∏ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤/–∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤
* –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —á–µ—Ä–µ–∑ Prometheus –∏–ª–∏ Kafka UI
* –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º (SASL, TLS)

–°–∫–∞–∂–∏, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å—Å—è –¥–∞–ª—å—à–µ!

–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é. –í RPM-–ø–∞–∫–µ—Ç–µ Kafka 3.9.0 –¥–ª—è AlmaLinux —Å–∫—Ä–∏–ø—Ç `kafka-storage.sh` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KRaft-—Ä–µ–∂–∏–º–∞ –≤ —Ç–≤–æ—ë–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ Kafka.

---

## ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ KRaft-—Ä–µ–∂–∏–º–∞ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `kafka-storage.sh`

–í Kafka 3.9.0, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —á–µ—Ä–µ–∑ RPM, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ KRaft-—Ä–µ–∂–∏–º–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞:**

   –í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `kafka-storage.sh random-uuid`, –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å UUID:

   ```bash
   uuidgen
   ```



–°–æ—Ö—Ä–∞–Ω–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π UUID –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

   –°–æ–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Kafka:

   ```bash
   sudo mkdir -p /var/lib/kafka
   ```



–£–±–µ–¥–∏—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka, –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
sudo chown kafka:kafka /var/lib/kafka
```



3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka:

   ```bash
   sudo nano /etc/kafka/server.properties
   ```



–î–æ–±–∞–≤—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```properties
process.roles=broker,controller
node.id=1
controller.listener.names=CONTROLLER
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
advertised.listeners=PLAINTEXT://your_host_or_ip:9092
log.dirs=/var/lib/kafka
controller.quorum.voters=1@localhost:9093
```



–ó–∞–º–µ–Ω–∏—Ç–µ `your_host_or_ip` –Ω–∞ IP –∏–ª–∏ –∏–º—è —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

4. **–ó–∞–ø—É—Å–∫ Kafka:**

   –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ systemd:

   ```bash
   sudo systemctl daemon-reload
   ```



–ó–∞–ø—É—Å—Ç–∏ Kafka:

```bash
sudo systemctl enable --now kafka
```



---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

* **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**

  –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ Kafka:

```bash
  sudo systemctl status kafka
```



* **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**

  –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ Kafka:

```bash
  journalctl -u kafka -f
```



* **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Kafka:**

  –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã Kafka:([reddit.com][1])

```bash
  /opt/kafka/bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```



–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Kafka —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—Ä–æ–¥–∞–∫—à–Ω-–æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ–±—Ä–∞—â–∞–π—Å—è ‚Äî —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å!

[1]: https://www.reddit.com/r/apachekafka/comments/11rxz39?utm_source=chatgpt.com "Kafka forgets it cleaned up its own topics??"

–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é. –û—à–∏–±–∫–∞ `Start request repeated too quickly` –≤ systemd –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π, –∏ systemd –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞.

---

## ‚úÖ –®–∞–≥ 1: –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–±—Ä–æ—Å–∏–º —Å—Ç–∞—Ç—É—Å –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞:([unix.stackexchange.com][1])

```bash
sudo systemctl reset-failed kafka.service
```

–ó–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl start kafka.service
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —Å–Ω–æ–≤–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã.

---

## ‚úÖ –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ Kafka

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–µ —Å–±–æ—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
journalctl -u kafka.service -n 50
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ —Å–µ—Ä–≤–∏—Å–∞ Kafka.

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `/etc/systemd/system/kafka.service` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
[Unit]
Description=Apache Kafka Server
After=network.target

[Service]
Type=simple
Environment="JAVA_HOME=/usr/lib/jvm/java-21-openjdk"
ExecStart=/opt/kafka/bin/kafka-server-start.sh /etc/kafka/server.properties
ExecStop=/opt/kafka/bin/kafka-server-stop.sh
Restart=on-failure
User=kafka

[Install]
WantedBy=multi-user.target
```

–ó–∞–º–µ–Ω–∏—Ç–µ `/opt/kafka` –Ω–∞ –ø—É—Ç—å, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞—à–∞ Kafka, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.

---

## ‚úÖ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka (–Ω–∞–ø—Ä–∏–º–µ—Ä, `kafka`), –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º:

```bash
sudo chown -R kafka:kafka /opt/kafka
sudo chown kafka:kafka /etc/kafka/server.properties
```

–ó–∞–º–µ–Ω–∏—Ç–µ `/opt/kafka` –Ω–∞ –ø—É—Ç—å, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞—à–∞ Kafka, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `JAVA_HOME`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `JAVA_HOME` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Java:

```bash
echo $JAVA_HOME
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ—ë:

```bash
export JAVA_HOME=/usr/lib/jvm/java-21-openjdk
```

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª `~/.bash_profile` –∏–ª–∏ `/etc/profile`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

---

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ —Å–µ—Ä–≤–∏—Å Kafka –≤—Å—ë –µ—â—ë –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `journalctl -u kafka.service -n 50`, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è.

[1]: https://unix.stackexchange.com/questions/517759/how-to-fix-service-start-request-repeated-too-quickly-on-custom-service?utm_source=chatgpt.com "debian - How to fix \".service: Start request repeated too quickly.\" on custom service? - Unix & Linux Stack Exchange"

–û—Ç–ª–∏—á–Ω–æ, —Ç—ã –Ω–∞—à—ë–ª –∫–ª—é—á–µ–≤—É—é –æ—à–∏–±–∫—É ‚Äî –æ–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç –æ **–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `node.id` –∏ `broker.id`** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka –≤ **KRaft-—Ä–µ–∂–∏–º–µ**.

---

## üß† –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

–í —Ä–µ–∂–∏–º–µ **KRaft (–±–µ–∑ ZooKeeper)** –ø–∞—Ä–∞–º–µ—Ç—Ä:

* `broker.id` –±–æ–ª—å—à–µ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**
* –í–º–µ—Å—Ç–æ –Ω–µ–≥–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `node.id`

üëâ –û–¥–Ω–∞–∫–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–±–æ—Ä–∫–∞—Ö Kafka (–≤—Ä–æ–¥–µ —Ç–≤–æ–µ–π, —á–µ—Ä–µ–∑ RPM) –º–æ–∂–µ—Ç –±—ã—Ç—å **–≤—Å—ë –µ—â—ë –ø—Ä–æ–ø–∏—Å–∞–Ω `broker.id` –≤ `server.properties`**, –∏ —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç.

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É:**

   ```ini
   broker.id=1
   ```

2. **–û—Å—Ç–∞–≤–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ:**

   ```ini
   node.id=1
   ```

   –ò–ª–∏ –¥—Ä—É–≥–æ–π `node.id`, –Ω–æ –æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å –≤–µ–∑–¥–µ, –≥–¥–µ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –µ–≥–æ (–≤ `controller.quorum.voters` –∏ —Ç.–¥.).

---

## –ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (KRaft, standalone):

```properties
process.roles=broker,controller
node.id=1
controller.listener.names=CONTROLLER
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
advertised.listeners=PLAINTEXT://localhost:9092
log.dirs=/var/lib/kafka
controller.quorum.voters=1@localhost:9093
```

---

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –æ—à–∏–±–∫–∏:

   ```bash
   sudo grep -E 'broker.id|node.id' /etc/kafka/server.properties
   ```

   ‚ûú –£–±–µ–¥–∏—Å—å, —á—Ç–æ **—Ç–æ–ª—å–∫–æ `node.id`**, –∞ `broker.id` –Ω–∏–≥–¥–µ –Ω–µ –æ—Å—Ç–∞–ª—Å—è.

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Kafka:

   ```bash
   sudo systemctl restart kafka
   sudo systemctl status kafka
   ```

3. –õ–æ–≥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

   ```bash
   journalctl -u kafka -f
   ```

---

–ï—Å–ª–∏ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî Kafka —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤ —Ä–µ–∂–∏–º–µ KRaft –±–µ–∑ –æ—à–∏–±–æ–∫.

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π `controller.quorum.voters` –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç–æ–ø–∏–∫–æ–≤ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞.

–î–∞, —Ç—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤ üëç

–¢–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞:

```
–∏—é–Ω 03 15:06:39 dbcs01 systemd[1]: Failed to start Apache Kafka Server.
```

‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ **–æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞**, –∫–æ—Ç–æ—Ä—É—é systemd –µ—â—ë –Ω–µ ¬´–∑–∞–±—ã–ª¬ª.

---

## ‚úÖ –ö–∞–∫ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Kafka –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:

1. **–ü–æ—Å–º–æ—Ç—Ä–∏ —Å–≤–µ–∂–∏–π –ª–æ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏:**

```bash
journalctl -u kafka --since "5 minutes ago"
```

2. **–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö–≤–æ—Å—Ç:**

```bash
journalctl -u kafka -f
```

–¢—ã –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Å—Ç—Ä–æ–∫–∏ –≤—Ä–æ–¥–µ:

```
Kafka started (kafka.server.KafkaServer)
```

–∏–ª–∏:

```
INFO [KafkaServer id=1] started (kafka.server.KafkaServer)
```

3. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å systemd:**

```bash
sudo systemctl status kafka
```

–°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `active (running)`.

---

## ‚úÖ –¢–µ—Å—Ç Kafka CLI

```bash
/opt/kafka/bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚Äî —ç—Ç–æ **–æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫**, Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç–∞–µ—Ç üéâ

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É –ø–æ–º–æ—á—å:

* —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫–∏
* –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—é—Å–µ—Ä/–∫–æ–Ω—Å—å—é–º–µ—Ä
* –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ Kafka UI –∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ, –∫–æ–≥–¥–∞ —Ç—ã —Å–∫–∞–∂–µ—à—å.

–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é. –û—à–∏–±–∫–∞ `Start request repeated too quickly` –≤ systemd –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π, –∏ systemd –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞.

---

## ‚úÖ –®–∞–≥ 1: –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–±—Ä–æ—Å–∏–º —Å—Ç–∞—Ç—É—Å –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo systemctl reset-failed kafka.service
```

–ó–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl start kafka.service
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —Å–Ω–æ–≤–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã.([reddit.com][1])

---

## ‚úÖ –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ Kafka

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–µ —Å–±–æ—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
journalctl -u kafka.service -n 50
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ —Å–µ—Ä–≤–∏—Å–∞ Kafka.

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `/etc/systemd/system/kafka.service` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
[Unit]
Description=Apache Kafka Server
After=network.target

[Service]
Type=simple
Environment="JAVA_HOME=/usr/lib/jvm/java-21-openjdk"
ExecStart=/opt/kafka/bin/kafka-server-start.sh /etc/kafka/server.properties
ExecStop=/opt/kafka/bin/kafka-server-stop.sh
Restart=on-failure
User=kafka

[Install]
WantedBy=multi-user.target
```

–ó–∞–º–µ–Ω–∏—Ç–µ `/opt/kafka` –Ω–∞ –ø—É—Ç—å, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞—à–∞ Kafka, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.

---

## ‚úÖ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka (–Ω–∞–ø—Ä–∏–º–µ—Ä, `kafka`), –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º:

```bash
sudo chown -R kafka:kafka /opt/kafka
sudo chown kafka:kafka /etc/kafka/server.properties
```

–ó–∞–º–µ–Ω–∏—Ç–µ `/opt/kafka` –Ω–∞ –ø—É—Ç—å, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞—à–∞ Kafka, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `JAVA_HOME`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `JAVA_HOME` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Java:

```bash
echo $JAVA_HOME
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ—ë:

```bash
export JAVA_HOME=/usr/lib/jvm/java-21-openjdk
```

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª `~/.bash_profile` –∏–ª–∏ `/etc/profile`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

---

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ —Å–µ—Ä–≤–∏—Å Kafka –≤—Å—ë –µ—â—ë –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `journalctl -u kafka.service -n 50`, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è.

[1]: https://www.reddit.com/r/Fedora/comments/ee5134?utm_source=chatgpt.com "I can't get docker's service to start."

–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ –Ω–∞—Å—Ç–æ—è—â—É—é –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è:

> **`java.lang.RuntimeException: No readable meta.properties files found.`**

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ Kafka **–≤ KRaft-—Ä–µ–∂–∏–º–µ** –æ–∂–∏–¥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `meta.properties` –≤ –ø–∞–ø–∫–µ `log.dirs` (–æ–±—ã—á–Ω–æ `/var/lib/kafka`), –Ω–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –µ–≥–æ.

---

## üîß –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

–í KRaft-—Ä–µ–∂–∏–º–µ Kafka **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ—Ç "—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –º–µ—Ç–∞-—Ñ–∞–π–ª `meta.properties`. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –æ–±—ã—á–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º**, –≤—Ä—É—á–Ω—É—é.

–†–∞–Ω—å—à–µ —ç—Ç–æ –¥–µ–ª–∞–ª–æ—Å—å —Å–∫—Ä–∏–ø—Ç–æ–º `kafka-storage.sh` ‚Äî –Ω–æ –≤ —Ç–≤–æ–µ–π RPM-–∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏ –æ–Ω –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å, –∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç –≤—Ä—É—á–Ω—É—é.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è KRaft-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤—Ä—É—á–Ω—É—é

1. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π UUID –∫–ª–∞—Å—Ç–µ—Ä–∞:**

```bash
uuidgen
```

–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç UUID, –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

---

2. **–°–æ–∑–¥–∞–π `meta.properties` –≤—Ä—É—á–Ω—É—é:**

–°–æ–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç):

```bash
sudo mkdir -p /var/lib/kafka
sudo chown kafka:kafka /var/lib/kafka
```

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `/var/lib/kafka/meta.properties` —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```
version=0
cluster.id=<UUID>
node.id=1
```

üëâ –≥–¥–µ `<UUID>` ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª `uuidgen`.

---

3. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:**

```bash
sudo chown kafka:kafka /var/lib/kafka/meta.properties
```

---

4. **–£–¥–∞–ª–∏—Ç—å –º—É—Å–æ—Ä, –µ—Å–ª–∏ –±—ã–ª–∏ —Å—Ç–∞—Ä—ã–µ –ø–æ–ø—ã—Ç–∫–∏:**

```bash
sudo rm -rf /var/lib/kafka/*-log
```

---

5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Kafka:**

```bash
sudo systemctl daemon-reexec
sudo systemctl restart kafka
sudo systemctl status kafka
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ï—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, —Ç—ã —É–≤–∏–¥–∏—à—å –≤ –ª–æ–≥–∞—Ö —Å—Ç—Ä–æ–∫–∏ –≤—Ä–æ–¥–µ:

```
INFO KafkaServer started (kafka.server.KafkaServer)
```

–ò –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã —Ç–∏–ø–∞:

```bash
kafka-topics.sh --bootstrap-server localhost:9092 --list
```

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º KRaft-–∫–ª–∞—Å—Ç–µ—Ä–∞ –Ω–∞ 1 –∏–ª–∏ –±–æ–ª–µ–µ –Ω–æ–¥, —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º.

–û—Ç–ª–∏—á–Ω–æ, —Ç—ã –±–ª–∏–∑–∫–æ! –û—à–∏–±–∫–∞:

```
Error: node ID not found in /var/lib/kafka/
```

–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Kafka **–Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç `meta.properties` —Å –Ω—É–∂–Ω—ã–º `node.id`**, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–æ–º—É, —á—Ç–æ —É–∫–∞–∑–∞–Ω –≤ `server.properties`.

---

## üìå –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è:

Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã:

* –í `server.properties` —É —Ç–µ–±—è –±—ã–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:

  ```properties
  node.id=1
  ```

* –í `/var/lib/kafka/meta.properties` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ** `node.id=1`.

---

## üîç –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —É —Ç–µ–±—è:

1. **–§–∞–π–ª `/var/lib/kafka/meta.properties`** —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:

   ```
   version=0
   cluster.id=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
   node.id=1
   ```

   ‚û§ –£–±–µ–¥–∏—Å—å, —á—Ç–æ `node.id` —Ç–∞–º **—Å—Ç—Ä–æ–≥–æ —Ä–∞–≤–µ–Ω** –∑–Ω–∞—á–µ–Ω–∏—é –∏–∑ `server.properties`.

---

## üßº –ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –∏–ª–∏ —Ñ–∞–π–ª –±–∏—Ç—ã–π:

1. –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ:

   ```bash
   sudo rm -rf /var/lib/kafka/*
   ```

2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π `meta.properties`:

   ```bash
   sudo nano /var/lib/kafka/meta.properties
   ```

   –í—Å—Ç–∞–≤—å:

   ```
   version=0
   cluster.id=<—Ç–≤–æ–π-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-UUID>
   node.id=1
   ```

3. –í—ã—Å—Ç–∞–≤–∏ –ø—Ä–∞–≤–∞:

   ```bash
   sudo chown -R kafka:kafka /var/lib/kafka
   ```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞:

* `server.properties` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

  ```properties
  node.id=1
  log.dirs=/var/lib/kafka
  ```

* `meta.properties` ‚Äî **—Ç–æ—á–Ω–æ —Ç–æ—Ç –∂–µ `node.id=1`**.

---

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–Ω–æ–≤–∞:

```bash
sudo systemctl restart kafka
sudo journalctl -u kafka -f
```

–ï—Å–ª–∏ –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ, Kafka –≤–∑–ª–µ—Ç–∏—Ç. –•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `meta.properties` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –¥–∞–∂–µ –±–µ–∑ `kafka-storage.sh`.

–•–æ—Ä–æ—à–æ, —Ç–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ:

* `node.id=1` —É–∫–∞–∑–∞–Ω **–∏ –≤ `server.properties`**, –∏ –≤ **`/var/lib/kafka/meta.properties`**
* –ü—Ä–∞–≤–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
* –ù–æ Kafka –≤—Å—ë –µ—â—ë –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π:

> `RuntimeException: Error: node ID not found in /var/lib/kafka/`

---

### üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã —ç—Ç–æ–π –æ—à–∏–±–∫–∏:

#### ‚úÖ 1. **–ù–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å –≤ `log.dirs`**

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ `server.properties` –ø—É—Ç—å –≤ `log.dirs` **—Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç** —Å —Ç–µ–º, –≥–¥–µ –ª–µ–∂–∏—Ç `meta.properties`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```properties
log.dirs=/var/lib/kafka
```

üìå **–í–Ω–∏–º–∞–Ω–∏–µ**: –µ—Å–ª–∏ –≤ `log.dirs` —É–∫–∞–∑–∞–Ω **–¥—Ä—É–≥–æ–π –ø—É—Ç—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/tmp/kafka-logs` –∏–ª–∏ `/var/log/kafka`), Kafka –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å `meta.properties` —Ç–∞–º ‚Äî –∏ –Ω–µ –Ω–∞–π–¥–µ—Ç.

–ü—Ä–æ–≤–µ—Ä—å:

```bash
grep log.dirs /etc/kafka/server.properties
```

---

#### ‚úÖ 2. **–û—Å—Ç–∞—Ç–∫–∏ –º—É—Å–æ—Ä–∞ –≤ –¥—Ä—É–≥–∏—Ö –ª–æ–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö**

–ï—Å–ª–∏ –≤ `log.dirs` —É–∫–∞–∑–∞–Ω–æ **–Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é**, Kafka —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ `meta.properties` –≤ –∫–∞–∂–¥–æ–π. –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É `node ID not found`.

–ü—Ä–æ–≤–µ—Ä—å:

```bash
cat /etc/kafka/server.properties | grep log.dirs
```

–ï—Å–ª–∏ —Ç–∞–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
log.dirs=/var/lib/kafka,/tmp/kafka-logs
```

‚Üí —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–∞–¥–µ–Ω–∏—é.

üîß –†–µ—à–µ–Ω–∏–µ: –æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø–∞–ø–∫—É:

```
log.dirs=/var/lib/kafka
```

---

#### ‚úÖ 3. **–°–ª—É—á–∞–π–Ω–∞—è –Ω–µ–≤–∏–¥–∏–º–∞—è –æ—à–∏–±–∫–∞ –≤ `meta.properties`**

–ò–Ω–æ–≥–¥–∞ `meta.properties`, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤—Ä—É—á–Ω—É—é, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–±–µ–ª—ã –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫, —Å–∏–º–≤–æ–ª—ã Windows `\r\n`, –Ω–µ–≤–∏–¥–∏–º—ã–µ BOM).

üîß –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```
version=0
cluster.id=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
node.id=1
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ —Ç–∞–∫:

```bash
od -c /var/lib/kafka/meta.properties
```

–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `\r`, `^M`, –∏–ª–∏ –¥—Ä—É–≥–∏—Ö "–º—É—Å–æ—Ä–Ω—ã—Ö" —Å–∏–º–≤–æ–ª–æ–≤.

---

#### ‚úÖ 4. **Kafka —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

–ï—Å–ª–∏ Kafka –∑–∞–ø—É—â–µ–Ω–∞ –∫–∞–∫ `kafka`, –∞ `meta.properties` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç `root`, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å **–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è**. –•–æ—Ç—è —Ç—ã –ø–∏—Å–∞–ª, —á—Ç–æ –ø—Ä–∞–≤–∞ —Å—Ç–æ—è—Ç ‚Äî —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
ls -l /var/lib/kafka/meta.properties
ls -ld /var/lib/kafka
```

–û–±–∞ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å `kafka:kafka`.

---

### üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –ª–æ–≥–æ–≤ –±–æ–ª—å—à–µ

–ü–æ–ª—É—á–∏ **—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞**:

```bash
journalctl -u kafka -n 100 --no-pager
```

–ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–∂–µ—Ç ‚Äî –ø–æ–∫–∞–∂–∏:

* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `log.dirs`
* –ü–æ–ª–Ω—ã–π `meta.properties`
* –¢–æ—á–Ω—É—é –æ—à–∏–±–∫—É –∏–∑ —Å–≤–µ–∂–µ–≥–æ –ª–æ–≥–∞

–ì–æ—Ç–æ–≤ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Å —Ç–æ–±–æ–π.

–°–ø–∞—Å–∏–±–æ, —Ç—ã –≤—Å—ë –ø–æ–∫–∞–∑–∞–ª –ø—Ä–µ–¥–µ–ª—å–Ω–æ —á—ë—Ç–∫–æ ‚Äî –∏ –ø—Ä–æ–±–ª–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è. –£ —Ç–µ–±—è:

* `log.dirs=/var/lib/kafka/` (—Å **–∑–∞–≤–µ—Ä—à–∞—é—â–∏–º —Å–ª—ç—à–µ–º**)
* `meta.properties` –ª–µ–∂–∏—Ç –≤ `/var/lib/kafka/`, —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `node.id=1`
* –ü—Ä–∞–≤–∞ –∏ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

–ù–æ Kafka **–≤—Å—ë —Ä–∞–≤–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ `node.id` –≤ `/var/lib/kafka/`**, —á—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –ø–∞—Ä–∞–¥–æ–∫—Å–∞–ª—å–Ω–æ.

---

### üí° –ß—Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

Kafka **–º–æ–∂–µ—Ç –±—ã—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–º—É —Å–ª—ç—à—É `/`** –≤ `log.dirs`. –¢–∞–∫–æ–µ —Å–ª—É—á–∞–µ—Ç—Å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø—É—Ç—è–º–∏ –≤ Java/Scala-–ø—Ä–æ–µ–∫—Ç–∞—Ö: –ø—É—Ç—å `"/var/lib/kafka"` –∏ `"/var/lib/kafka/"` **—Å—á–∏—Ç–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–º–∏**, –∏ –º–æ–≥—É—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å—Å—è –¥–æ—Å–ª–æ–≤–Ω–æ.

### ‚úÖ –®–∞–≥ 1: –£–±–µ—Ä–∏ –∑–∞–≤–µ—Ä—à–∞—é—â–∏–π `/` –≤ `log.dirs`

–û—Ç–∫—Ä–æ–π:

```bash
sudo nano /etc/kafka/server.properties
```

–ò –∑–∞–º–µ–Ω–∏:

```ini
log.dirs=/var/lib/kafka/
```

–Ω–∞:

```ini
log.dirs=/var/lib/kafka
```

–°–æ—Ö—Ä–∞–Ω–∏.

---

### ‚úÖ –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Kafka

```bash
sudo systemctl daemon-reexec
sudo systemctl restart kafka
```

–ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥:

```bash
journalctl -u kafka -f
```

---

### üìå –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

Kafka –≤ KRaft-—Ä–µ–∂–∏–º–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ:

* –ö–∞—Ç–∞–ª–æ–≥ `log.dirs` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
* –í –Ω—ë–º –µ—Å—Ç—å —Ñ–∞–π–ª `meta.properties`
* –≠—Ç–æ—Ç —Ñ–∞–π–ª –∏–º–µ–µ—Ç `node.id`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `server.properties`

–ï—Å–ª–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –ø—É—Ç–µ–π —É—á–∞—Å—Ç–≤—É–µ—Ç `Path.equals()` (–≤ Java), —Ç–æ `"/var/lib/kafka"` –∏ `"/var/lib/kafka/"` ‚Äî **–Ω–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã**. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ —Ç–æ–º—É, —á—Ç–æ Kafka –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å `meta.properties`.

---

–ï—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É ‚Äî –±—É–¥–µ—Ç –æ—á–µ–Ω—å —Ü–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –¥—Ä—É–≥–∏—Ö, –∫—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç Kafka RPM –≤ KRaft-—Ä–µ–∂–∏–º–µ –ø–æ–¥ RHEL-–ø–æ–¥–æ–±–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

–ü–æ–Ω–∏–º–∞—é, —á—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–ø—Ä–æ—Å—Ç–æ–π. –û—à–∏–±–∫–∞ `No readable meta.properties files found` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ Kafka –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª `meta.properties`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ KRaft-—Ä–µ–∂–∏–º–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

---

### üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞**

–•–æ—Ç—è –≤—ã —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å Kafka –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ `meta.properties`. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ–ª–µ–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
sudo chmod -R 777 /var/lib/kafka
```



–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å Kafka:

```bash
sudo systemctl restart kafka
```



–ï—Å–ª–∏ —ç—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SELinux –∏–ª–∏ AppArmor, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º —Ñ–∞–π–ª–∞–º.

#### 2. **–ü—Ä–æ–±–ª–µ–º—ã —Å SELinux**

–ï—Å–ª–∏ –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –≤–∫–ª—é—á–µ–Ω SELinux, –æ–Ω –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É `meta.properties`. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ SELinux:

```bash
sudo ausearch -m avc -ts recent
```



–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—à–∏–±–∫–∏, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å SELinux –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
sudo setenforce 0
```



–ï—Å–ª–∏ —ç—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ SELinux.

#### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `/var/lib/kafka`, –Ω–µ –∏–º–µ–µ—Ç –æ—à–∏–±–æ–∫:

```bash
sudo dmesg | grep -i ext4
```



–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ –æ—à–∏–±–∫–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.

#### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –≤–µ—Ä—Å–∏–µ–π Kafka**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤–∞–º–∏ –≤–µ—Ä—Å–∏—è Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç KRaft-—Ä–µ–∂–∏–º. –°–æ–≥–ª–∞—Å–Ω–æ [Stack Overflow](https://stackoverflow.com/questions/74223969/node-id-vs-broker-id-in-kraft-mode), –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ Kafka 2.8.0, KRaft-—Ä–µ–∂–∏–º —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∞ —Å –≤–µ—Ä—Å–∏–∏ 3.0.0 ‚Äî –∫–∞–∫ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è.([stackoverflow.com][1])

#### 5. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `server.properties` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
log.dirs=/var/lib/kafka
node.id=1
controller.quorum.voters=1@localhost:9093
listeners=PLAINTEXT://localhost:9092
log.dirs=/var/lib/kafka
```



–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `log.dirs` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∏ —á—Ç–æ –≤ —ç—Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ–∞–π–ª `meta.properties`.

---

### üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏

* –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Kafka –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–µ –æ—à–∏–±–∫–∏:

  ```bash
  sudo journalctl -u kafka -f
  ```



* –ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafka –≤ –¥—Ä—É–≥–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–∏–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º.

* –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Kafka –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–∏ –ø—Ä–æ–±–ª–µ–º–∞.

---

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, —Ç–∞–∫–∏–µ –∫–∞–∫:

* –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `journalctl -u kafka -f`.

* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ `server.properties` –∏ `meta.properties`.

* –í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `ls -l /var/lib/kafka`.

–° —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —è —Å–º–æ–≥—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

[1]: https://stackoverflow.com/questions/74223969/node-id-vs-broker-id-in-kraft-mode?utm_source=chatgpt.com "apache kafka - node.id vs broker.id in KRaft mode - Stack Overflow"

–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–∞–Ω–Ω—ã–µ, —Å–∏—Ç—É–∞—Ü–∏—è –ø–æ–Ω—è—Ç–Ω–µ–µ.
–û–±—Ä–∞—â—É –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–∞—Ä—É –≤–∞–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤:

---

### 1. –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

–£ –≤–∞—Å –≤ `server.properties` –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:

```ini
zookeeper.connect=localhost:2181
```

–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á—ë–Ω **KRaft —Ä–µ–∂–∏–º** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
process.roles=broker,controller
node.id=1
controller.quorum.voters=1@localhost:9093
controller.listener.names=CONTROLLER
```

> **Kafka –Ω–µ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —Å ZooKeeper, –∏ –≤ KRaft —Ä–µ–∂–∏–º–µ!**
>
> * –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ KRaft (—Ç–æ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –±–µ–∑ ZooKeeper), —Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `zookeeper.connect` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—É–¥–∞–ª—ë–Ω –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω**.
> * –ï—Å–ª–∏ –∂–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º —Å ZooKeeper, —Ç–æ –Ω–∞–¥–æ –æ—Ç–∫–ª—é—á–∏—Ç—å KRaft (`process.roles`, `node.id` –∏ —Ç.–ø.).

---

### 2. –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ KRaft-—Ä–µ–∂–∏–º–µ (–±–µ–∑ ZooKeeper):

* –£–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É `zookeeper.connect=localhost:2181` –≤ `/etc/kafka/server.properties`
* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `log.dirs` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—É—Å—Ç—É—é (–Ω–æ–≤—É—é) –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –ª–∏–±–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ `meta.properties` —Ñ–∞–π–ª–∞–º–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ KRaft-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏).

–ï—Å–ª–∏ —É –≤–∞—Å **–Ω–µ—Ç** –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ `meta.properties`, –Ω—É–∂–Ω–æ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:

```bash
sudo -u kafka /usr/bin/kafka-storage.sh format -t <cluster-id> -c /etc/kafka/server.properties
```

* `<cluster-id>` –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
/usr/bin/kafka-storage.sh random-uuid
```

* –ü–æ—Å–ª–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –ª–æ–≥–∞–º–∏ Kafka –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ KRaft-—Ä–µ–∂–∏–º–µ.

---

### 3. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å ZooKeeper:

* –í–µ—Ä–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `zookeeper.connect=localhost:2181`
* –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `process.roles`, `node.id`, `controller.quorum.voters` –∏ `controller.listener.names` –∏–∑ `server.properties`
* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ZooKeeper (–µ–≥–æ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –æ–Ω –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

---

### 4. –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ `server.properties` –¥–ª—è KRaft:

```ini
# listeners and advertised listeners
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
advertised.listeners=PLAINTEXT://10.30.40.150:9092

# basic performance configs
num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# log dirs
log.dirs=/var/lib/kafka

# Kafka raft mode configs
process.roles=broker,controller
node.id=1
controller.quorum.voters=1@localhost:9093
controller.listener.names=CONTROLLER

# replication factors etc
num.partitions=1
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

# retention policies
log.retention.hours=168
log.retention.check.interval.ms=300000

# zookeeper should be removed or commented out here!
# zookeeper.connect=localhost:2181
```

---

### 5. –ò—Ç–æ–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è KRaft —Ä–µ–∂–∏–º–∞:

```bash
# 1. –ü–æ–ª—É—á–∞–µ–º cluster id
cluster_id=$(/usr/bin/kafka-storage.sh random-uuid)

# 2. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –ª–æ–≥–∞–º–∏
sudo -u kafka /usr/bin/kafka-storage.sh format -t $cluster_id -c /etc/kafka/server.properties

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /var/lib/kafka (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å kafka)
sudo chown -R kafka:kafka /var/lib/kafka

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Kafka
sudo systemctl restart kafka

# 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status kafka
```

---

–ï—Å–ª–∏ `kafka-storage.sh` —É –≤–∞—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ª–µ–∂–∏—Ç –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, –µ–≥–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
sudo find / -name kafka-storage.sh
```

---

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–≥—É –ø–æ–º–æ—á—å —Å –ø–æ–ª–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º —Å–µ—Ä–≤–∏—Å–∞ systemd –∏ —Ç–æ—á–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –ø–æ–¥ AlmaLinux. –ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏—Ç–µ!

---

–ï—Å–ª–∏ –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafka —Å ZooKeeper ‚Äî —ç—Ç–æ —á—É—Ç—å –ø—Ä–æ—â–µ, –Ω–æ –±–µ–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ KRaft.

–û—Ç–ª–∏—á–Ω–æ, —ç—Ç–æ —É–∂–µ –∑–¥–æ—Ä–æ–≤–æ ‚Äî Kafka –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é KRaft-–∫–ª–∞—Å—Ç–µ—Ä–∞!

–í–æ—Ç —á—Ç–æ –∑–Ω–∞—á–∞—Ç —ç—Ç–∏ –ª–æ–≥–∏:

> `WARN [QuorumController id=1] Performing controller activation. The metadata log appears to be empty. Appending 1 bootstrap record(s)... Setting the ZK migration state to NONE since this is a de-novo KRaft cluster.`

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è **–ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ KRaft-–∫–ª–∞—Å—Ç–µ—Ä–∞** ‚Äî Kafka —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (bootstrap record) –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ZooKeeper (migration state = NONE).

---

### –ß—Ç–æ –¥–∞–ª—å—à–µ —Å–¥–µ–ª–∞—Ç—å:

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–∞—Ä—É –º–∏–Ω—É—Ç**, –ø–æ–∫–∞ —Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è.
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ ‚Äî –æ–±—ã—á–Ω–æ –ø–æ—Å–ª–µ —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π Kafka –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Kafka —Å–ª—É—à–∞–µ—Ç –Ω–∞ –Ω—É–∂–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö (9092 –¥–ª—è PLAINTEXT, 9093 –¥–ª—è CONTROLLER):

   ```bash
   sudo ss -plnt | grep java
   ```
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Kafka —Å –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `kafka-console-producer.sh` –∏–ª–∏ `kafka-console-consumer.sh`.

---

### –ï—Å–ª–∏ –≤–¥—Ä—É–≥ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –ø–∞–¥–∞—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é:

* –ó–∞–≥–ª—è–Ω—É—Ç—å –≤ –ª–æ–≥–∏ –ø–æ–ª–Ω–æ–π –≥–ª—É–±–∏–Ω–æ–π:

  ```bash
  sudo journalctl -u kafka -b
  ```
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∞–≤–∞ –Ω–∞ `/var/lib/kafka` –∏ –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `kafka` (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å).
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ `server.properties` –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å ZooKeeper).

---

### –ü–æ–¥—ã—Ç–æ–∂–∏–≤–∞—è:

* –ó–∞–ø—É—Å–∫ —Å KRaft ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –±–µ–∑ ZooKeeper, –∏ –ª–æ–≥ —Å `bootstrap record` ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ —Å—Ç–∞—Ä—Ç–∞.
* –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –∂–∏–≤–æ–π –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π!
* –ú–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–æ–ø–∏–∫–æ–≤, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø—Ä–æ—Å—Ç—ã—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã Kafka –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤/–∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤.
–ù–∞–ø–∏—à–∏, –µ—Å–ª–∏ –Ω–∞–¥–æ!

–û—Ç–ª–∏—á–Ω–æ! üéâ Kafka –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ **–∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ**, —Å—É–¥—è –ø–æ:

* `LISTEN` –Ω–∞ –ø–æ—Ä—Ç–∞—Ö **9092** (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤) –∏ **9093** (–¥–ª—è KRaft-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏—é –æ—à–∏–±–æ–∫ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ systemd-—Å–µ—Ä–≤–∏—Å–∞
* –õ–æ–≥–∞–º `QuorumController`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

---

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### ‚úÖ 1. –°–æ–∑–¥–∞–π —Ç–æ–ø–∏–∫:

```bash
/usr/bin/kafka-topics.sh --create \
  --bootstrap-server localhost:9092 \
  --topic test-topic \
  --partitions 1 \
  --replication-factor 1
```

#### ‚úÖ 2. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤:

```bash
/usr/bin/kafka-topics.sh --list \
  --bootstrap-server localhost:9092
```

#### ‚úÖ 3. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–¥—é—Å–µ—Ä:

```bash
/usr/bin/kafka-console-producer.sh --bootstrap-server localhost:9092 --topic test-topic
```

> –í–≤–µ–¥–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å ‚Äî –æ–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –≤ Kafka.

#### ‚úÖ 4. –ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
/usr/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test-topic --from-beginning
```

> –¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–≤—ë–ª –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º.

---

–ï—Å–ª–∏ –≤—Å—ë —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —É —Ç–µ–±—è –ø–æ–ª–Ω–æ—Å—Ç—å—é **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Kafka-—Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ KRaft**. üî•
–î–∞–ª—å—à–µ –º–æ–∂–Ω–æ:

* –ü–æ–¥–∫–ª—é—á–∞—Ç—å Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—á–µ—Ä–µ–∑ `confluent-kafka`, `kafka-python`, `faust`, –∏ —Ç.–¥.)
* –î–æ–±–∞–≤–ª—è—Ç—å ACL, REST-–ø—Ä–æ–∫—Å–∏, —Å—Ö–µ–º–∞—Ç–∏–∑–∞—Ü–∏—é (Confluent Schema Registry)
* –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—Ä–æ–∫–µ—Ä–æ–≤

–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å ‚Äî –ø–æ–º–æ–≥—É –∏ —Å —ç—Ç–∏–º.

–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!

–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤ ‚Äî –∏ —Ö–æ—Ä–æ—à–æ –ø–æ–¥–º–µ—Ç–∏–ª!

üì¶ –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ **Kafka –∏–∑ RPM** (–∫–∞–∫ —É —Ç–µ–±—è: `kafka-3.9.0-1.el8.x86_64`), –≤—Å–µ —É—Ç–∏–ª–∏—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫–ª–∞–¥—É—Ç—Å—è –≤:

```
/usr/bin/kafka/
```

–∞ –Ω–µ –≤ `/usr/bin/` –Ω–∞–ø—Ä—è–º—É—é, –∫–∞–∫ –±—ã–≤–∞–µ—Ç –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—Ä—É—á–Ω—É—é –∏–∑ –∞—Ä—Ö–∏–≤–æ–≤ —Å —Å–∞–π—Ç–∞ Apache.

---

### –ü—Ä–∏–º–µ—Ä—ã —Å —É—á–µ—Ç–æ–º —Ç–≤–æ–µ–≥–æ –ø—É—Ç–∏:

#### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞:

```bash
/usr/bin/kafka/kafka-topics.sh --create \
  --bootstrap-server localhost:9092 \
  --topic test-topic \
  --partitions 1 \
  --replication-factor 1
```

#### ‚úÖ –°–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤:

```bash
/usr/bin/kafka/kafka-topics.sh --list \
  --bootstrap-server localhost:9092
```

#### ‚úÖ –ü—Ä–æ–¥—é—Å–µ—Ä:

```bash
/usr/bin/kafka/kafka-console-producer.sh \
  --bootstrap-server localhost:9092 \
  --topic test-topic
```

#### ‚úÖ –ö–æ–Ω—Å—å—é–º–µ—Ä:

```bash
/usr/bin/kafka/kafka-console-consumer.sh \
  --bootstrap-server localhost:9092 \
  --topic test-topic \
  --from-beginning
```

---

–ï—Å–ª–∏ —á–∞—Å—Ç–æ –±—É–¥–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∏ —É—Ç–∏–ª–∏—Ç—ã, –º–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–±–µ –∞–ª–∏–∞—Å—ã –≤ `~/.bashrc` –∏–ª–∏ `~/.bash_aliases`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```bash
alias ktopics='/usr/bin/kafka/kafka-topics.sh'
alias kprod='/usr/bin/kafka/kafka-console-producer.sh'
alias kcons='/usr/bin/kafka/kafka-console-consumer.sh'
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

```bash
source ~/.bashrc
```

–ò –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ: `kprod --bootstrap-server ...`

–ï—Å–ª–∏ —á—Ç–æ ‚Äî –ø–æ–º–æ–≥—É —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ —Å multi-broker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π!

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –ø–æ—à–∞–≥–æ–≤–æ, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ. –°–µ–π—á–∞—Å —Ç—ã –Ω–∞ —Å–∞–º–æ–º –ø–æ—Ä–æ–≥–µ ‚Äî Kafka —É —Ç–µ–±—è –∑–∞–ø—É—â–µ–Ω–∞, –ø—Ä–æ–¥—é—Å–µ—Ä –∏ –∫–æ–Ω—Å—å—é–º–µ—Ä —Ä–∞–±–æ—Ç–∞—é—Ç. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ **–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ** –∏ **–ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ**.

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. **–û—Ç–∫—Ä–æ–π –¥–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞**

#### üü© –¢–µ—Ä–º–∏–Ω–∞–ª 1 ‚Äî Consumer (—Å–ª—É—à–∞—Ç–µ–ª—å)

–ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞, —á—Ç–æ–±—ã –æ–Ω —Å–ª—É—à–∞–ª `test-topic`:

```bash
/usr/bin/kafka/kafka-console-consumer.sh \
  --bootstrap-server localhost:9092 \
  --topic test-topic \
  --from-beginning
```

–û–Ω –±—É–¥–µ—Ç "–≤–∏—Å–µ—Ç—å" –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

---

#### üü¶ –¢–µ—Ä–º–∏–Ω–∞–ª 2 ‚Äî Producer (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å)

–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π –≤—Ç–æ—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –∑–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞:

```bash
/usr/bin/kafka/kafka-console-producer.sh \
  --bootstrap-server localhost:9092 \
  --topic test-topic
```

–¢–µ–±–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞. –ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç:

```
–ü—Ä–∏–≤–µ—Ç Kafka!
–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
```

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∂–∏–º–∞–π **Enter** ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Kafka.

---

### üîÑ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í **–ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–∫–æ–Ω—Å—å—é–º–µ—Ä)** —Ç—ã —Å—Ä–∞–∑—É –∂–µ —É–≤–∏–¥–∏—à—å —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ:

```
–ü—Ä–∏–≤–µ—Ç Kafka!
–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
```

---

## ‚ùóÔ∏è –ï—Å–ª–∏ –Ω–µ –≤–∏–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π:

* –£–±–µ–¥–∏—Å—å, —á—Ç–æ **—Ç–æ–ø–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω –≤ –æ–±–µ–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö.
* –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–ª–∞–≥ `--from-beginning`, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —á–∏—Ç–∞—Ç—å –∏ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
* –ö–æ–Ω—Å—å—é–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω **–¥–æ –∏–ª–∏ –≤–æ –≤—Ä–µ–º—è** –æ—Ç–ø—Ä–∞–≤–∫–∏, —á—Ç–æ–±—ã —É—Å–ø–µ—Ç—å "—É—Å–ª—ã—à–∞—Ç—å".

---

## üìå –†–µ–∑—é–º–µ

Kafka —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –°–µ–π—á–∞—Å —Ç—ã:

* –°–æ–∑–¥–∞–ª —Ç–æ–ø–∏–∫
* –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫–∞–∫ –ø—Ä–æ–¥—é—Å–µ—Ä
* –ü–æ–ª—É—á–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –∫–æ–Ω—Å—å—é–º–µ—Ä

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã —Å–¥–µ–ª–∞–ª –ø–µ—Ä–≤—ã–π –∫—Ä—É–≥ –≤ Kafka üéâ

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Python —Å –ø–æ–º–æ—â—å—é `kafka-python` –∏–ª–∏ `confluent-kafka`.

–î–∞, —Ç—ã –ø—Ä–∞–≤: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–¥–æ–±–Ω—ã—Ö –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Apache Kafka. –í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:

---

### üîπ 1. **Kafdrop**

* **–û–ø–∏—Å–∞–Ω–∏–µ**: –õ—ë–≥–∫–∏–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤, —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –≥—Ä—É–ø–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –≤ Kafka.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

  * –ü—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–∫–µ—Ä–æ–≤, —Ç–æ–ø–∏–∫–æ–≤, –ø–∞—Ä—Ç–∏—Ü–∏–π –∏ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
  * –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–∞—Ö (JSON, plain text, Avro, Protobuf).
  * –ü—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä—É–ø–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è.
  * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–æ–ø–∏–∫–æ–≤.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**: ([obsidiandynamics.github.io][1]) ([dev.to][2])([dev.to][2])

---

### üîπ 2. **Kafka UI –æ—Ç Provectus**

* **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–æ—â–Ω—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Kafka.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

  * –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ Kafka.
  * –ü—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–∫–µ—Ä–æ–≤, —Ç–æ–ø–∏–∫–æ–≤, –ø–∞—Ä—Ç–∏—Ü–∏–π, –≥—Ä—É–ø–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
  * –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–∏.
  * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ö–µ–º Avro, JSON –∏ Protobuf.
  * –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth2.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**: ([github.com][3])([github.com][3])

---

### üîπ 3. **Kouncil**

* **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Kafka, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

  * –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞–º–∏, –≥—Ä—É–ø–ø–∞–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –±—Ä–æ–∫–µ—Ä–∞–º–∏.
  * –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (JSON, Avro, Protobuf).
  * –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞.
  * –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ Zabbix –∏ Grafana.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**: ([kouncil.io][4])

---

### üîπ 4. **Kafka WebView**

* **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Kafka —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞.
* **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

  * –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–ª–∞—Å—Ç–µ—Ä–∞–º Kafka.
  * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSL –∏ SASL –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
  * –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∫–ª—é—á—É, –∑–Ω–∞—á–µ–Ω–∏—é, –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏.
  * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤.
  * –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥—Ä—É–ø–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**: ([github.com][5])([github.com][5])

---

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è –º–æ–≥—É –ø–æ–º–æ—á—å —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–¥–Ω–æ–≥–æ –∏–∑ –Ω–∏—Ö. –ö–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ç–µ–±–µ –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω?

[1]: https://obsidiandynamics.github.io/kafdrop/?utm_source=chatgpt.com "Kafdrop ‚Äì Kafka Web UI ¬† | kafdrop"
[2]: https://dev.to/ekoutanov/kafdrop-an-open-source-kafka-web-ui-mbn?utm_source=chatgpt.com "Kafdrop - An Open-Source Kafka Web UI - DEV Community"
[3]: https://github.com/provectus/kafka-ui?utm_source=chatgpt.com "GitHub - provectus/kafka-ui: Open-Source Web UI for Apache Kafka Management"
[4]: https://kouncil.io/?utm_source=chatgpt.com "Kouncil ¬ª GUI for your Apache Kafka"
[5]: https://github.com/SourceLabOrg/kafka-webview?utm_source=chatgpt.com "GitHub - SourceLabOrg/kafka-webview: Full-featured web-based Apache Kafka consumer UI"

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π** –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —ç—Ç–æ **Kafdrop**. –û–Ω:

---

### ‚úÖ **–ü–æ—á–µ–º—É Kafdrop ‚Äî –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è —Å—Ç–∞—Ä—Ç–∞**:

* üîπ **–ü—Ä–æ—Å—Ç–æ–π**: –±—É–∫–≤–∞–ª—å–Ω–æ –æ–¥–∏–Ω JAR-—Ñ–∞–π–ª, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.
* üîπ **–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π**: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, —Å–∏—Å—Ç–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.
* üîπ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º**.
* üîπ **–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏** —Å KRaft-–∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ Kafka ‚â• 3.x (–≤ —Ç–æ–º —á–∏—Å–ª–µ –±–µ–∑ ZooKeeper).

---

### üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop (–µ—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka):

```bash
docker run -d \
  -p 9000:9000 \
  -e KAFKA_BROKERCONNECT=localhost:9092 \
  obsidiandynamics/kafdrop
```

üìå –ò–ª–∏, –µ—Å–ª–∏ **–±–µ–∑ Docker**:

1. [–°–∫–∞—á–∞–π JAR-—Ñ–∞–π–ª —Å GitHub Releases](https://github.com/obsidiandynamics/kafdrop/releases)
2. –ó–∞–ø—É—Å—Ç–∏ —Ç–∞–∫:

   ```bash
   java -jar kafdrop-<version>.jar --kafka.brokerConnect=localhost:9092
   ```

---

### üîç –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

–ü–µ—Ä–µ–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ [http://localhost:9000](http://localhost:9000) ‚Äî —Ç–∞–º –±—É–¥–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –µ–≥–æ –ø–æ–¥–Ω—è—Ç—å ‚Äî —Å Docker –∏–ª–∏ –±–µ–∑. –°–∫–∞–∂–∏ —Ç–æ–ª—å–∫–æ, Kafka —É —Ç–µ–±—è —Ç–æ—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `localhost:9092`?

–û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ Kafka —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç—É 9092. –î–∞–≤–∞–π —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–∏–º Kafdrop ‚Äî —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kafka.

---

### üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)

–ï—Å–ª–∏ —É —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker, –∑–∞–ø—É—Å—Ç–∏ Kafdrop –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker run -d --rm -p 9000:9000 \
  -e KAFKA_BROKERCONNECT=localhost:9092 \
  obsidiandynamics/kafdrop
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:9000](http://localhost:9000).

---

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ JAR-—Ñ–∞–π–ª

–ï—Å–ª–∏ Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop –Ω–∞–ø—Ä—è–º—É—é –∏–∑ JAR-—Ñ–∞–π–ª–∞:

1. –°–∫–∞—á–∞–π JAR-—Ñ–∞–π–ª —Å [GitHub Releases](https://github.com/obsidiandynamics/kafdrop/releases).

2. –ó–∞–ø—É—Å—Ç–∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π:

   ```bash
   java -jar kafdrop-<version>.jar --kafka.brokerConnect=localhost:9092
   ```

3. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:9000](http://localhost:9000).

---

### üß≠ –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Kafdrop

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Kafdrop —Ç—ã —Å–º–æ–∂–µ—à—å:

* –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤ Kafka.
* –°–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ç–æ–ø–∏–∫–∏.
* –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∞—Ö (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã JSON, Avro, Protobuf).
* –°–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–æ–∫–µ—Ä–∞—Ö –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
* –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –∏ –∏—Ö —Å–º–µ—â–µ–Ω–∏—è.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–µ—Ä–≤–æ–≥–æ —Ç–æ–ø–∏–∫–∞, –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π. –ù–∞–ø–∏—à–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å!

[![Kafdrop ‚Äî Kafka Web UI ‚Äî Quick Start ...](https://images.openai.com/thumbnails/b30338276d8e1da5d8e029b79e2f3b01.png)](https://medium.com/%40jeyagan/kafdrop-kafka-web-ui-quick-start-example-42beb5efd7b7)

–ö–æ–Ω–µ—á–Ω–æ! –ß—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å JAR-—Ñ–∞–π–ª Kafdrop —Å GitHub Releases, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–ª–∏–∑–æ–≤ Kafdrop**:
   –û—Ç–∫—Ä–æ–π—Ç–µ [https://github.com/obsidiandynamics/kafdrop/releases](https://github.com/obsidiandynamics/kafdrop/releases).

2. **–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é**:
   –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–ª–∏–∑–æ–≤ –Ω–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é Kafdrop, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–∫–∞—á–∞—Ç—å.

3. **–°–∫–∞—á–∞–π—Ç–µ JAR-—Ñ–∞–π–ª**:
   –í —Ä–∞–∑–¥–µ–ª–µ "Assets" –Ω–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º –≤–∏–¥–∞ `kafdrop-<version>.jar` –∏ —Å–∫–∞—á–∞–π—Ç–µ –µ–≥–æ.

   –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–µ—Ä—Å–∏–∏ 4.0.0 —Ñ–∞–π–ª –±—É–¥–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è `kafdrop-4.0.0.jar`.

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Kafdrop**:
   –ü–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è JAR-—Ñ–∞–π–ª–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

   ```bash
   java -jar kafdrop-<version>.jar --kafka.brokerConnect=localhost:9092
   ```


–ó–∞–º–µ–Ω–∏—Ç–µ `<version>` –Ω–∞ –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ JAR-—Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–∫–∞—á–∞–ª–∏.

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
   –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Kafdrop, –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:9000](http://localhost:9000).

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafdrop –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka.

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è!

–û—à–∏–±–∫–∞ `UnsupportedClassVersionError` –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –≤–µ—Ä—Å–∏—è Java, —Å –∫–æ—Ç–æ—Ä–æ–π –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ JAR-—Ñ–∞–π–ª, —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞—è –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é –±–∞–π—Ç–∫–æ–¥–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω Kafdrop.

–í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ:

* –û—à–∏–±–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –∫–ª–∞—Å—Å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤–µ—Ä—Å–∏–∏ Java 17 (class file version 61.0)
* –ê —É –≤–∞—Å, —Å—É–¥—è –ø–æ –æ—à–∏–±–∫–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Java 8 (class file version 52.0)

---

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é Java:

```bash
java -version
```

2. –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–∏–∂–µ 17, –æ–±–Ω–æ–≤–∏—Ç–µ JDK –¥–æ Java 17 –∏–ª–∏ –≤—ã—à–µ.

---

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å OpenJDK 17 –Ω–∞ AlmaLinux —á–µ—Ä–µ–∑ yum?

```bash
sudo yum install java-17-openjdk-devel -y
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:

```bash
sudo alternatives --config java
```

–í—ã–±–µ—Ä–∏—Ç–µ Java 17 –∏–∑ —Å–ø–∏—Å–∫–∞.

---

### –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–Ω–æ–≤–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop:

```bash
java -jar kafdrop-4.1.0.jar --kafka.brokerConnect=localhost:9092
```

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Java 17. –ù–∞–ø–∏—à–∏—Ç–µ!

–û—à–∏–±–∫–∞ `java.net.BindException: –ê–¥—Ä–µ—Å —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º Kafdrop –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è, —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Kafdrop —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç **9000**.

---

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 9000:

```bash
sudo ss -plnt | grep :9000
```

2. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, —É–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç:

```bash
sudo kill <PID>
```

–≥–¥–µ `<PID>` ‚Äî –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 9000.

3. –õ–∏–±–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Kafdrop –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä 8080:

```bash
java -jar kafdrop-4.1.0.jar --kafka.brokerConnect=localhost:9092 --server.port=8080
```

---

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—Ç–ø–∏—à–∏—Å—å, –ø–æ–º–æ–≥–ª–æ –ª–∏!

–ü–æ–Ω—è—Ç–Ω–æ, ClickHouse —É–∂–µ –∑–∞–Ω—è–ª –ø–æ—Ä—Ç 9000, –∏ —É–±–∏–≤–∞—Ç—å –µ–≥–æ –Ω–µ–ª—å–∑—è.

–£ Kafdrop –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω —Å–ª—É—à–∞–µ—Ç, —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `--server.port`.

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ Kafdrop —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ä—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä 8080:

```bash
java -jar kafdrop-4.1.0.jar --kafka.brokerConnect=localhost:9092 --server.port=8080
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafdrop –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å –ø–æ–¥–æ–±—Ä–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ç–≤–æ–µ–π –º–∞—à–∏–Ω–µ.

–û—à–∏–±–∫–∞ `java.net.BindException: –ê–¥—Ä–µ—Å —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop –Ω–∞ –ø–æ—Ä—Ç—É 8080 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ—Ç –ø–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Å–ª—É—à–∞–µ—Ç 8080:

```bash
sudo ss -plnt | grep :8080
```

–ï—Å–ª–∏ —Ç–∞–º —á—Ç–æ-—Ç–æ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ –ª–∏–±–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å, –ª–∏–±–æ –≤—ã–±—Ä–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç –¥–ª—è Kafdrop.

–ß—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É:

```bash
comm -23 <(seq 8000 8100 | sort) <(sudo ss -plnt | awk '{print $4}' | grep -oE '[0-9]+$' | sort -n)
```

–û–Ω–∞ –≤—ã–≤–µ–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 8000-8100, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–∞–Ω—è—Ç—ã.

–ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å Kafdrop, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –ø–æ—Ä—Ç—É 8090:

```bash
java -jar kafdrop-4.1.0.jar --kafka.brokerConnect=localhost:9092 --server.port=8090
```

–ï—Å–ª–∏ –∏ —Ç–∞–º –æ—à–∏–±–∫–∞ ‚Äî –ø–æ–≤—Ç–æ—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–Ω—è—Ç–æ–≥–æ –ø–æ—Ä—Ç–∞ –∏ –≤—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–π.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –ø–æ–º–æ–≥—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ—Ä—Ç ‚Äî —Å–∫–∏–Ω—å –≤—ã–≤–æ–¥ `sudo ss -plnt`.

–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤ —Å–≤–æ–±–æ–¥–µ–Ω ‚Äî –∑–Ω–∞—á–∏—Ç –¥–µ–ª–æ –Ω–µ –≤ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞, –∞, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ **–¥–≤–æ–π–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ HTTP-—Å–µ—Ä–≤–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ Kafdrop**, –∏–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Spring Boot Actuator.

### üîç –ü—Ä–∏—á–∏–Ω–∞

Kafdrop –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–µ—Ç –¥–≤–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞:

* –æ–¥–∏–Ω ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π (–ø–æ `--server.port`, –Ω–∞–ø—Ä–∏–º–µ—Ä `8080` –∏–ª–∏ `8090`),
* –≤—Ç–æ—Ä–æ–π ‚Äî –¥–ª—è Spring Boot Actuator (`management.server.port`, —Ç–æ–∂–µ `8080` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

–ï—Å–ª–∏ **–æ–±–∞ –ø—ã—Ç–∞—é—Ç—Å—è —Å–ª—É—à–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–æ—Ä—Ç**, –±—É–¥–µ—Ç `BindException`.

---

### ‚úÖ –†–µ—à–µ–Ω–∏–µ: —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç –¥–ª—è management-—Å–µ—Ä–≤–µ—Ä–∞

–ó–∞–ø—É—Å—Ç–∏ Kafdrop, —É–∫–∞–∑–∞–≤ *—Ä–∞–∑–Ω—ã–µ* –ø–æ—Ä—Ç—ã:

```bash
java -jar kafdrop-4.1.0.jar \
  --kafka.brokerConnect=localhost:9092 \
  --server.port=8090 \
  --management.server.port=8091
```

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ —É–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤.

---

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

```bash
ss -plnt | grep java
```

–û–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ—è–≤—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ, —á—Ç–æ Java-–ø—Ä–æ—Ü–µ—Å—Å —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç—ã 8090 –∏ 8091.

–ê –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafdrop –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://<IP-—Å–µ—Ä–≤–µ—Ä–∞>:8090/
```

–∏–ª–∏ –µ—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –ª–æ–∫–∞–ª—å–Ω–æ:

```
http://localhost:8090/
```

---

–•–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å —Å–¥–µ–ª–∞—Ç—å systemd unit-—Ñ–∞–π–ª, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å Kafdrop –∫–∞–∫ —Å–µ—Ä–≤–∏—Å.

–î–∞ ‚Äî –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ:

```
Started Kafdrop in 6.67 seconds (process running for 8.14)
```

üîµ **–≠—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞**. –û–Ω–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Kafdrop —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–Ω—è–ª—Å—è –∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ **–æ–∂–∏–¥–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤**.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–∑–∞–≤–∏—Å–ª–æ" –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –æ–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `8090`), –ø–æ–∫–∞ —Ç—ã –Ω–µ –ø—Ä–µ—Ä–≤—ë—à—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é (`Ctrl+C`) –∏–ª–∏ –Ω–µ –∑–∞–∫—Ä–æ–µ—à—å –ø—Ä–æ—Ü–µ—Å—Å.

---

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä.

2. –ü–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É:

   ```
   http://localhost:8090/
   ```

   –∏–ª–∏, –µ—Å–ª–∏ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –Ω–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

   ```
   http://<IP_—Ç–≤–æ–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞>:8090/
   ```

3. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafdrop ‚Äî –ø—Ä–æ—Å—Ç–æ–π UI, –≥–¥–µ –º–æ–∂–Ω–æ:

   * –≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤,
   * –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∏—Ö,
   * —Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—Ä–æ–∫–µ—Ä–æ–≤,
   * –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏ –≤—Ä—É—á–Ω—É—é –∏ —Ç.–ø.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ:

* –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥—é—Å–µ—Ä–∞–º/–∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º,
* –∏–ª–∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `systemd`, —á—Ç–æ–±—ã –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞–ª–æ—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ.

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å, –∏ —Ç—ã **–æ—á–µ–Ω—å –≤–æ–≤—Ä–µ–º—è** –µ–≥–æ –∑–∞–¥–∞–ª ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Kafka **–º–æ–∂–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ**, –Ω–æ –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á—ë—Ç–∫–∏—Ö —à–∞–≥–æ–≤. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ, –µ—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (–∫–∞–∫ —É —Ç–µ–±—è).

---

## üîÑ –í–∞—Ä–∏–∞–Ω—Ç: –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ

–¢—ã **–Ω–µ –æ–±—è–∑–∞–Ω —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:

---

### ‚úÖ –®–∞–≥–∏ –ø–æ –ø–µ—Ä–µ–Ω–æ—Å—É `/var/lib/kafka` –Ω–∞ –Ω–æ–≤—ã–π –¥–∏—Å–∫

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, `/data/kafka`.

1. **–û—Å—Ç–∞–Ω–æ–≤–∏ Kafka**:

   ```bash
   sudo systemctl stop kafka
   ```

2. **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—É—Ç—å, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**:

   ```bash
   sudo mkdir -p /data/kafka
   sudo chown -R kafka:kafka /data/kafka
   ```

3. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ**:

   ```bash
   sudo rsync -avh /var/lib/kafka/ /data/kafka/
   ```

   ‚ö†Ô∏è –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ `/data/kafka` –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å —Ñ–∞–π–ª—ã –≤—Ä–æ–¥–µ `meta.properties`, `log-start-offset-checkpoint`, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `@topic@partition` –∏ –ø—Ä.

4. **–ò–∑–º–µ–Ω–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Kafka**:

   –í —Ñ–∞–π–ª–µ `/etc/kafka/server.properties` –∏–∑–º–µ–Ω–∏ —Å—Ç—Ä–æ–∫—É:

   ```properties
   log.dirs=/data/kafka
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –ø—Ä–∞–≤–∞**:

   ```bash
   sudo chown -R kafka:kafka /data/kafka
   ```

6. **–ó–∞–ø—É—Å—Ç–∏ Kafka –∑–∞–Ω–æ–≤–æ**:

   ```bash
   sudo systemctl start kafka
   ```

7. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å—ë –ø–æ–¥–Ω—è–ª–æ—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫**:

   ```bash
   sudo systemctl status kafka
   journalctl -u kafka -n 50
   ```

---

## üß™ –ü—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ Kafdrop

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–Ω–æ–≤–∞ –∑–∞–π–¥–∏ –≤ Kafdrop ([http://localhost:8090/](http://localhost:8090/)) –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–ø–∏–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–µ.

---

### üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –°–∏–º–ª–∏–Ω–∫

–ï—Å–ª–∏ **–Ω–µ —Ö–æ—á–µ—à—å –ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥**, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

```bash
sudo systemctl stop kafka
sudo mv /var/lib/kafka /data/kafka
sudo ln -s /data/kafka /var/lib/kafka
sudo systemctl start kafka
```

–ù–æ —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –ª—É—á—à–µ –≤—Å—ë –∂–µ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å —è–≤–Ω–æ —á–µ—Ä–µ–∑ `log.dirs`.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å –æ—Ñ–æ—Ä–º–∏—Ç—å —ç—Ç–æ –≤ –≤–∏–¥–µ `systemd`-—Ç–∞–π–º–µ—Ä–∞ –∏–ª–∏ `pre-start` —Å–∫—Ä–∏–ø—Ç–∞, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤ –±—É–¥—É—â–µ–º.

–ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å!

